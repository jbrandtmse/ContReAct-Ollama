# Story 1.1: Project Scaffolding and Environment Setup

**Status**: Ready for Review

---

## Story

**As a** Researcher,
**I want** the complete project structure and development environment set up,
**so that** I have a clean foundation to build the application.

---

## Acceptance Criteria

1. A Python virtual environment is created and activated
2. The complete project directory structure exists as defined in architecture.md (contreact_ollama/, ui/, scripts/, tests/, configs/, data/, logs/)
3. A `.gitignore` file is created with appropriate Python and project-specific exclusions
4. A `pyproject.toml` or `requirements.txt` file exists listing all required dependencies (streamlit, requests, tinydb, sentence-transformers, pyyaml, etc.)
5. All dependencies are successfully installed via `pip install`
6. A basic `README.md` exists with project title, description, and setup instructions
7. The git repository is initialized with an initial commit

---

## Tasks / Subtasks

- [x] **Task 1: Create Python Virtual Environment** (AC: 1)
  - [x] Create virtual environment using `python -m venv venv`
  - [x] Document activation commands for different platforms in README
  - [x] Verify Python version is 3.9+ (Python 3.13.7 installed)

- [x] **Task 2: Create Complete Directory Structure** (AC: 2)
  - [x] Create root-level files (.gitignore, README.md, LICENSE, pyproject.toml)
  - [x] Create `contreact_ollama/` package with all subpackages (core/, state/, llm/, tools/, diversity/, logging/)
  - [x] Create `ui/` directory with pages/ subdirectory
  - [x] Create `scripts/` directory
  - [x] Create `tests/` directory with subdirectories (unit/, integration/, fixtures/)
  - [x] Create `configs/` directory with .gitkeep and sample-config.yaml
  - [x] Create `data/` directory with .gitkeep
  - [x] Create `logs/` directory with .gitkeep
  - [x] Create `docs/` directory (if not already existing)
  - [x] Add `__init__.py` files to all Python packages

- [x] **Task 3: Create .gitignore File** (AC: 3)
  - [x] Add Python-specific exclusions (*.pyc, __pycache__, .pytest_cache, venv/, .venv/)
  - [x] Add project-specific exclusions (configs/*.yaml except sample, data/*, logs/*.jsonl)
  - [x] Add IDE-specific exclusions (.vscode/, .idea/, *.swp)
  - [x] Keep .gitkeep files tracked in otherwise empty directories

- [x] **Task 4: Create Dependency Configuration** (AC: 4)
  - [x] Create `pyproject.toml` with project metadata and dependencies
  - [x] List all dependencies with minimum versions from tech stack
  - [x] Include development dependencies (pytest, black, isort, mypy)
  - [x] Set Python version requirement to >=3.9

- [x] **Task 5: Install Dependencies** (AC: 5)
  - [x] Install project in editable mode: `pip install -e .`
  - [x] Verify all packages install without errors
  - [x] Verify package versions meet minimum requirements

- [x] **Task 6: Create README.md** (AC: 6)
  - [x] Add project title and description
  - [x] Add setup instructions (virtual environment, dependencies)
  - [x] Add basic usage information (placeholder for run_experiment.py)
  - [x] Add project structure overview
  - [x] Add license information

- [x] **Task 7: Initialize Git Repository** (AC: 7)
  - [x] Run `git init` if not already initialized
  - [x] Stage all scaffolding files (git add)
  - [x] Create initial commit with message "Initial project scaffolding"
  - [x] Verify .gitignore is working (no data/, logs/, configs/*.yaml in staging)

---

## Dev Notes

### Previous Story Insights
No previous story - this is the first story in Epic 1.

### Project Structure
**Source**: [docs/architecture/unified-project-structure.md]

Complete directory tree to create:
```
contreact-ollama/
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â”œâ”€â”€ LICENSE
â”œâ”€â”€ pyproject.toml                 # Project metadata and dependencies
â”œâ”€â”€ setup.py                        # Package installation script
â”‚
â”œâ”€â”€ contreact_ollama/               # Main Python package
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ experiment_runner.py
â”‚   â”‚   â”œâ”€â”€ cycle_orchestrator.py
â”‚   â”‚   â””â”€â”€ config.py
â”‚   â”œâ”€â”€ state/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ agent_state.py
â”‚   â”‚   â””â”€â”€ models.py
â”‚   â”œâ”€â”€ llm/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ ollama_interface.py
â”‚   â”‚   â”œâ”€â”€ prompt_assembler.py
â”‚   â”‚   â””â”€â”€ response_parser.py
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ tool_dispatcher.py
â”‚   â”‚   â”œâ”€â”€ memory_tools.py
â”‚   â”‚   â””â”€â”€ operator_communication.py
â”‚   â”œâ”€â”€ diversity/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ embedding_service.py
â”‚   â”‚   â””â”€â”€ similarity_monitor.py
â”‚   â”œâ”€â”€ logging/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ jsonl_logger.py
â”‚   â””â”€â”€ constants.py
â”‚
â”œâ”€â”€ ui/                             # Streamlit web interface
â”‚   â”œâ”€â”€ dashboard.py                # Main entry point
â”‚   â””â”€â”€ pages/
â”‚       â”œâ”€â”€ 1_ðŸ§ª_Experiment_Configuration.py
â”‚       â””â”€â”€ 2_ðŸ“Š_Results_Dashboard.py
â”‚
â”œâ”€â”€ scripts/                        # Command-line scripts
â”‚   â”œâ”€â”€ run_experiment.py           # Main experiment runner
â”‚   â””â”€â”€ run_pei_assessment.py       # PEI assessment script
â”‚
â”œâ”€â”€ tests/                          # Test suite
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”œâ”€â”€ test_cycle_orchestrator.py
â”‚   â”‚   â”œâ”€â”€ test_ollama_interface.py
â”‚   â”‚   â”œâ”€â”€ test_tool_dispatcher.py
â”‚   â”‚   â”œâ”€â”€ test_memory_tools.py
â”‚   â”‚   â””â”€â”€ test_similarity_monitor.py
â”‚   â”œâ”€â”€ integration/
â”‚   â”‚   â”œâ”€â”€ test_full_cycle.py
â”‚   â”‚   â””â”€â”€ test_experiment_flow.py
â”‚   â””â”€â”€ fixtures/
â”‚       â”œâ”€â”€ sample_config.yaml
â”‚       â””â”€â”€ mock_responses.json
â”‚
â”œâ”€â”€ configs/                        # Experiment configurations (gitignored *.yaml)
â”‚   â”œâ”€â”€ .gitkeep
â”‚   â””â”€â”€ sample-config.yaml          # Example configuration
â”‚
â”œâ”€â”€ data/                           # Persistent data (gitignored)
â”‚   â”œâ”€â”€ .gitkeep
â”‚   â””â”€â”€ memory.db                   # Agent memory database
â”‚
â”œâ”€â”€ logs/                           # Experiment logs (gitignored *.jsonl)
â”‚   â””â”€â”€ .gitkeep
â”‚
â””â”€â”€ docs/                           # Documentation
    â”œâ”€â”€ architecture.md
    â”œâ”€â”€ prd.md
    â”œâ”€â”€ front-end-spec.md
    â”œâ”€â”€ brief.md
    â””â”€â”€ SoftwareDesignSpecification.md
```

**Directory Purposes**:
- `contreact_ollama/`: Main application package, organized by functional area
- `ui/`: Streamlit web interface, decoupled from backend
- `scripts/`: Entry point scripts for CLI usage
- `tests/`: Comprehensive test suite mirroring source structure
- `configs/`: User-created experiment configurations (*.yaml gitignored, sample committed)
- `data/`: Runtime data storage (gitignored)
- `logs/`: Experiment output logs (*.jsonl gitignored)
- `docs/`: Project documentation (committed)

### Dependencies
**Source**: [docs/architecture/tech-stack.md]

All dependencies with minimum versions:

**Core Dependencies**:
- `python>=3.9` - Primary language, required for library compatibility
- `streamlit>=1.38.0,<2.0.0` - Web UI framework for data-centric apps
- `tinydb>=4.8.0,<5.0.0` - Lightweight key-value store for agent memory
- `ollama>=0.4.0,<0.5.0` - Official Python client for Ollama platform
- `sentence-transformers>=3.0.1,<4.0.0` - Semantic embeddings for diversity mechanism
- `numpy>=1.26.4,<2.0.0` - Numerical operations for vector calculations
- `scipy>=1.13.1,<2.0.0` - Scientific computing for cosine similarity
- `plotly>=5.22.0,<6.0.0` - Interactive charts for Streamlit UI
- `pandas>=2.2.2,<3.0.0` - Data manipulation for .jsonl parsing
- `pyyaml>=6.0,<7.0` - YAML configuration file parsing

**Development Dependencies**:
- `pytest>=8.2.2,<9.0.0` - Testing framework for Python
- `pytest-playwright>=0.5.0,<1.0.0` - End-to-end testing for Streamlit UI
- `black>=24.0.0,<25.0.0` - Code formatter
- `isort>=5.13.0,<6.0.0` - Import sorter
- `mypy>=1.10.0,<2.0.0` - Static type checker

### Coding Standards
**Source**: [docs/architecture/coding-standards.md]

**Code Formatting**:
- Use Black with line length 100 characters
- Use isort with Black-compatible settings for import organization
- Run formatters before committing: `black --line-length 100 contreact_ollama/`

**Naming Conventions**:
- Files: snake_case (e.g., `cycle_orchestrator.py`)
- Classes: PascalCase (e.g., `CycleOrchestrator`)
- Functions/methods: snake_case (e.g., `execute_chat_completion`)
- Constants: UPPER_SNAKE_CASE (e.g., `DEFAULT_TEMPERATURE`)

**File Organization**:
- All Python packages must have `__init__.py` files
- Test structure mirrors source code structure
- Private methods prefixed with underscore

### .gitignore Patterns

**Python-specific**:
```
# Byte-compiled / optimized / DLL files
__pycache__/
*.py[cod]
*$py.class
*.so

# Distribution / packaging
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg

# Virtual environments
venv/
.venv/
ENV/
env/

# Testing
.pytest_cache/
.coverage
htmlcov/

# IDEs
.vscode/
.idea/
*.swp
*.swo
*~
```

**Project-specific**:
```
# Experiment configurations (except sample)
configs/*.yaml
!configs/sample-config.yaml

# Runtime data
data/*
!data/.gitkeep

# Experiment logs
logs/*.jsonl
!logs/.gitkeep

# Model files if accidentally downloaded
*.gguf
models/
```

### README.md Content

**Minimum sections required**:
1. **Project Title**: "ContReAct-Ollama Experimental Platform"
2. **Description**: "Replicate 'What Do LLM Agents Do When Left Alone?' research using local Ollama LLMs"
3. **Requirements**: Python 3.9+, Ollama installed and running
4. **Setup Instructions**:
   - Virtual environment creation and activation
   - Dependency installation: `pip install -e .`
5. **Project Structure**: Brief overview of directory layout
6. **License**: MIT (as per LICENSE file)
7. **Usage**: Placeholder for future `run_experiment.py` instructions

### pyproject.toml Structure

**Source**: [docs/architecture/coding-standards.md#dependencies]

Required sections:
- `[build-system]`: Use setuptools
- `[project]`: Metadata (name, version, description, authors, license, python version)
- `[project.dependencies]`: All runtime dependencies with version constraints
- `[project.optional-dependencies]`: Development dependencies under `dev` key
- `[tool.black]`: Line length = 100
- `[tool.isort]`: Black-compatible settings (profile = "black")

---

## Testing

**Source**: [docs/architecture/coding-standards.md#testing-standards]

### Test Standards for This Story
- **Test Coverage Target**: >80% code coverage
- **Test Organization**: Mirror source structure in `tests/` directory
- **Testing Framework**: pytest 8.2.2+
- **Test File Location**: 
  - Unit tests: `tests/unit/`
  - Integration tests: `tests/integration/`
  - Test fixtures: `tests/fixtures/`

### Testing Requirements for Story 1.1
Since this story is scaffolding only (no functional code), testing requirements are:
1. **Manual verification** that all directories exist
2. **Manual verification** that `pip install -e .` completes successfully
3. **Manual verification** that Python imports work: `python -c "import contreact_ollama"`
4. **Git verification**: Ensure .gitignore works correctly (no excluded files in staging area)

**Note**: Automated tests will be written in subsequent stories when functional code is implemented.

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-08 | 1.0 | Initial story creation | Bob (Scrum Master) |

---

## Dev Agent Record

### Agent Model Used
- Claude 3.7 Sonnet (via Cline)
- Implementation Date: 2025-01-09

### Debug Log References
- pyproject.toml: Fixed "Multiple top-level packages" error by adding `[tool.setuptools.packages.find]` configuration
- pyproject.toml: Removed upper bounds on numpy/scipy for Python 3.13 compatibility
- pyproject.toml: Changed license format from table to string to avoid deprecation warnings
- README.md: Updated installation instructions to use `pip install -e .` instead of requirements.txt
- README.md: Added platform-specific venv activation commands

### Completion Notes List
1. Successfully created Python 3.13.7 virtual environment (exceeds 3.9+ requirement)
2. Created complete directory structure matching architecture specification
3. Verified .gitignore patterns working correctly
4. Created pyproject.toml with all dependencies and fixed package discovery
5. Successfully installed all dependencies using --only-binary flag to avoid compilation issues
6. README.md already existed with comprehensive content; added "Under Development" banner
7. Created initial git commit (b0cde99) and pushed to GitHub repository
8. Repository URL: https://github.com/jbrandtmse/ContReAct-Ollama

### File List

**Created/Modified Files:**
- `pyproject.toml` - Created with project metadata, dependencies, and package configuration
- `README.md` - Modified to add "Under Development" warning banner
- `contreact_ollama/__init__.py` - Created
- `contreact_ollama/core/__init__.py` - Created
- `contreact_ollama/state/__init__.py` - Created
- `contreact_ollama/llm/__init__.py` - Created
- `contreact_ollama/tools/__init__.py` - Created
- `contreact_ollama/diversity/__init__.py` - Created
- `contreact_ollama/logging/__init__.py` - Created
- `contreact_ollama/constants.py` - Created
- `tests/__init__.py` - Created
- `configs/.gitkeep` - Created
- `data/.gitkeep` - Created
- `logs/.gitkeep` - Created

**Existing Files (Verified):**
- `.gitignore` - Verified correct patterns
- `LICENSE` - Verified MIT license
- `README.md` - Verified and enhanced

---

## QA Results
*To be populated by QA agent after implementation*
